/*
 * RC-SELECT COMPONENT STYLES
 * Uses Tailwind CSS @apply directives.
 */

/* ========================================================================
 * 1. CORE SELECT COMPONENT (.rc-select)
 * ======================================================================== */

.rc-select {
  /* Base properties */
  @apply relative;

  /* Remove default search clear button */
  input[type='search']::-webkit-search-cancel-button {
    @apply appearance-none;
  }

  /* Disabled State */
  &.rc-select-disabled {
    @apply cursor-not-allowed opacity-(--form-disabled-opacity) bg-(--form-disabled-bg);
    .rc-select-selector {
      @apply bg-transparent border-(--form-disabled-border);
    }
  }

  &.rc-invalid {
    .rc-select-selector {
      @apply border-destructive ring-destructive/40;
    }
  }

  /* Selector Container (Input/Selected Items Wrapper) */
  .rc-select-selector {
    @apply relative flex items-center w-full border border-(--form-border-color) bg-(--form-bg) rounded-(--form-radius) shadow-(--form-shadow);
    height: var(--form-height-outer);
    box-sizing: border-box;
  }

  /* Placeholder Text */
  .rc-select-selection-placeholder {
    @apply pointer-events-none text-(--form-placeholder);
    font-size: var(--form-font-size);
  }

  /* Search/Input Field within Selector */
  .rc-select-selection-search-input {
    @apply w-full border-none outline-none bg-transparent shadow-none text-(--form-text);
    font-size: var(--form-font-size);
  }

  /* Action Buttons */
  .rc-select-arrow {
    @apply absolute right-3 top-3 w-4 text-center pointer-events-none;
  }

  .rc-select-clear {
    @apply absolute right-9 top-1.5 w-4 text-center cursor-pointer;
  }
}

/* ----------------------------------
 * 1.1 SINGLE SELECT MODE
 * ---------------------------------- */

.rc-select-single {
  .rc-select-selector {
    @apply flex relative;
  }

  .rc-select-selection-search-input {
    /* Input spans full width, hides below item/placeholder, keeps space for clear/arrow */
    @apply absolute top-0 bottom-0 left-0 pl-(--form-padding-x) right-3 pr-11 appearance-none;
    font-size: var(--form-font-size);
  }

  .rc-select-selection-item,
  .rc-select-selection-placeholder {
    /* Aligns item and placeholder in the center */
    @apply absolute top-1/2 -translate-y-1/2 overflow-hidden whitespace-nowrap text-ellipsis leading-relaxed;
    left: var(--form-padding-x);
    right: var(--form-padding-x);
    font-size: var(--form-font-size);
  }
}

/* ----------------------------------
 * 1.2 MULTIPLE SELECT MODE
 * ---------------------------------- */

.rc-select-multiple {
  .rc-select-selector {
    @apply flex relative;
  }

  /* Selected Tag Items */
  .rc-select-selection-item {
    @apply flex gap-2 items-center bg-primary text-primary-foreground rounded-full px-2.5 py-0.5;
    font-size: var(--form-font-size);
  }

  .rc-select-selection-item-disabled {
    @apply cursor-not-allowed opacity-50;
  }

  .rc-select-selection-item-remove {
    @apply cursor-pointer relative -top-px;
  }

  /* Placeholder */
  .rc-select-selection-placeholder {
    @apply absolute left-3 right-3 top-1/2 -translate-y-1/2 overflow-hidden whitespace-nowrap text-ellipsis leading-relaxed;
    font-size: var(--form-font-size);
  }

  /* Overflow (Wrapper for tags and search input) */
  .rc-select-selection-overflow {
    @apply flex flex-wrap gap-1 pt-1.5 pb-1 pl-3 pr-9;
  }

  .rc-select-selection-overflow-item {
    @apply flex-none;
  }

  /* Search Input Wrapper */
  .rc-select-selection-search {
    @apply relative -top-px;
  }

  .rc-select-selection-search-mirror {
    /* Used for calculating input width */
    @apply bg-red-400 absolute top-0 left-0 whitespace-nowrap invisible;
  }

  .rc-select-selection-search-input {
    @apply min-w-[200px] box-border;
    font-size: var(--form-font-size);
  }
}

/* ----------------------------------
 * 1.3 SIZE VARIANTS
 * ---------------------------------- */

.rc-select--sm {
  .rc-select-selector {
    height: var(--form-height-sm-outer);
  }

  .rc-select-selection-search-input,
  .rc-select-selection-item,
  .rc-select-selection-placeholder {
    font-size: var(--form-font-size-sm);
  }

  .rc-select-arrow {
    @apply top-2;
  }

  .rc-select-clear {
    @apply top-1;
  }
}

/* ========================================================================
 * 2. DROPDOWN PANEL (.rc-select-dropdown)
 * ======================================================================== */

.rc-select-dropdown {
  @apply absolute min-h-5 p-1 shadow-md rounded-md;
  background: var(--popover);
  color: var(--popover-foreground);
  z-index: 99999;
}

.rc-select-dropdown-hidden {
  @apply hidden;
}

/* Dropdown Option Items */
.rc-select-item-option {
  @apply py-1.5 px-2 relative rounded-sm mb-0.5 last-of-type:mb-0 flex justify-between;
  font-size: var(--form-font-size);

  /* Hover State */
  &:hover {
    @apply bg-gray-50;
  }

  /* Active/Selected States */
  &.rc-select-item-option-selected {
    @apply bg-primary/20!;
  }

  &.rc-select-item-option-active {
    @apply bg-gray-100;
  }

  /* Disabled State */
  &.rc-select-item-option-disabled {
    @apply cursor-not-allowed;
    color: var(--muted-foreground);
  }

  /* Icon/State Wrapper */
  .rc-select-item-option-state {
    @apply flex-none;
  }
}

.rc-select-dropdown-slide-up-enter,
.rc-select-dropdown-slide-up-appear {
  animation-duration: 0.3s;
  animation-fill-mode: both;
  transform-origin: 0 0;
  opacity: 0;
  animation-timing-function: cubic-bezier(0.08, 0.82, 0.17, 1);
  animation-play-state: paused;
}
.rc-select-dropdown-slide-up-leave {
  animation-duration: 0.3s;
  animation-fill-mode: both;
  transform-origin: 0 0;
  opacity: 1;
  animation-timing-function: cubic-bezier(0.6, 0.04, 0.98, 0.34);
  animation-play-state: paused;
}
.rc-select-dropdown-slide-up-enter.rc-select-dropdown-slide-up-enter-active.rc-select-dropdown-placement-bottomLeft,
.rc-select-dropdown-slide-up-appear.rc-select-dropdown-slide-up-appear-active.rc-select-dropdown-placement-bottomLeft,
.rc-select-dropdown-slide-up-enter.rc-select-dropdown-slide-up-enter-active.rc-select-dropdown-placement-bottomRight,
.rc-select-dropdown-slide-up-appear.rc-select-dropdown-slide-up-appear-active.rc-select-dropdown-placement-bottomRight {
  animation-name: rcSelectDropdownSlideUpIn;
  animation-play-state: running;
}
.rc-select-dropdown-slide-up-leave.rc-select-dropdown-slide-up-leave-active.rc-select-dropdown-placement-bottomLeft,
.rc-select-dropdown-slide-up-leave.rc-select-dropdown-slide-up-leave-active.rc-select-dropdown-placement-bottomRight {
  animation-name: rcSelectDropdownSlideUpOut;
  animation-play-state: running;
}
.rc-select-dropdown-slide-up-enter.rc-select-dropdown-slide-up-enter-active.rc-select-dropdown-placement-topLeft,
.rc-select-dropdown-slide-up-appear.rc-select-dropdown-slide-up-appear-active.rc-select-dropdown-placement-topLeft,
.rc-select-dropdown-slide-up-enter.rc-select-dropdown-slide-up-enter-active.rc-select-dropdown-placement-topRight,
.rc-select-dropdown-slide-up-appear.rc-select-dropdown-slide-up-appear-active.rc-select-dropdown-placement-topRight {
  animation-name: rcSelectDropdownSlideDownIn;
  animation-play-state: running;
}
.rc-select-dropdown-slide-up-leave.rc-select-dropdown-slide-up-leave-active.rc-select-dropdown-placement-topLeft,
.rc-select-dropdown-slide-up-leave.rc-select-dropdown-slide-up-leave-active.rc-select-dropdown-placement-topRight {
  animation-name: rcSelectDropdownSlideDownOut;
  animation-play-state: running;
}

@keyframes rcSelectDropdownSlideUpIn {
  0% {
    opacity: 0;
    transform-origin: 0% 0%;
    transform: scaleY(0);
  }
  100% {
    opacity: 1;
    transform-origin: 0% 0%;
    transform: scaleY(1);
  }
}

@keyframes rcSelectDropdownSlideUpOut {
  0% {
    opacity: 1;
    transform-origin: 0% 0%;
    transform: scaleY(1);
  }
  100% {
    opacity: 0;
    transform-origin: 0% 0%;
    transform: scaleY(0);
  }
}

@keyframes rcSelectDropdownSlideDownIn {
  0% {
    transform: scaleY(0);
    transform-origin: 100% 100%;
    opacity: 0;
  }
  100% {
    transform: scaleY(1);
    transform-origin: 100% 100%;
    opacity: 1;
  }
}

@keyframes rcSelectDropdownSlideDownOut {
  0% {
    transform: scaleY(1);
    transform-origin: 100% 100%;
    opacity: 1;
  }
  100% {
    transform: scaleY(0);
    transform-origin: 100% 100%;
    opacity: 0;
  }
}

@keyframes rcSelectLoadingIcon {
  0% {
    transform: rotate(0);
  }
  100% {
    transform: rotate(360deg);
  }
}
